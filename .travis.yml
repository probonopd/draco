language: cpp
sudo: required
dist: xenial
compiler:
  - clang
  - g++

before_install:
  - sudo apt-get update

install:
  - sudo apt-get install fakeroot dpkg tree build-essential cmake pkg-config qtbase5-dev libqt5x11extras5-dev libx11-dev libxss-dev libxdamage-dev libxrandr-dev libxfixes-dev libxcb1-dev libx11-xcb-dev libxcb-randr0-dev libxcb-ewmh-dev libxcb-icccm4-dev libxcb-image0-dev libxcb-composite0-dev libxcb-damage0-dev libxcb-util0-dev libxcb-shm0-dev openbox-dev

script:
  - export CWD=`pwd`
  - mkdir $CWD/build-release
  - cd $CWD/build-release
  - bash -ex ../src/build-deb.sh
  - ls -lh

after_success:
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh *.deb
  
branches:
  except:
    - /^(?i:continuous)/
